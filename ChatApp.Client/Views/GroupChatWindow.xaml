<Window x:Class="ChatApp.Client.Views.GroupChatWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ChatApp.Client.Views"
        mc:Ignorable="d"
        Title="Group Chat" Height="600" Width="1000" WindowStartupLocation="CenterScreen"
        Closing="form_closing">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Background="#2196F3">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="10">
                <Image x:Name="GroupAvatar" Width="40" Height="40" Margin="0,0,10,0"/>
                <StackPanel>
                    <TextBlock x:Name="GroupName" Text="Group Name" FontSize="16" FontWeight="Bold" Foreground="White"/>
                    <TextBlock x:Name="MemberCount" Text="0 members" FontSize="12" Foreground="White"/>
                </StackPanel>
            </StackPanel>

            <Button x:Name="GroupInfoButton" Grid.Column="2" Content="Group Info" Margin="10" 
                    Background="Transparent" BorderBrush="White" Foreground="White"
                    Click="GroupInfo_Click"/>
        </Grid>

        <!-- Chat Area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="250"/>
            </Grid.ColumnDefinitions>

            <!-- Messages -->
            <ScrollViewer x:Name="ChatMessages" Grid.Column="0" VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="MessageContainer" Margin="10"/>
            </ScrollViewer>

            <!-- Members List -->
            <Border Grid.Column="1" BorderBrush="#DDDDDD" BorderThickness="1,0,0,0">
                <StackPanel>
                    <TextBlock Text="Members" FontSize="16" FontWeight="Bold" Margin="10"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel x:Name="MembersList" Margin="10"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Input Area -->
        <Grid Grid.Row="1" Background="#F5F5F5" Margin="0,484,252,0" Grid.RowSpan="2" >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button x:Name="AttachmentButton" Grid.Column="0" Width="40" Height="40" Margin="0,0,10,0"
                    Background="Transparent" BorderThickness="0" Click="AttachmentButton_Click">
                <Path Data="M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"
                      Fill="#666666" Stretch="Uniform" Margin="5"/>
            </Button>

            <RichTextBox x:Name="TextMess" Grid.Column="1" Height="40" VerticalContentAlignment="Center"
                         BorderThickness="1" BorderBrush="#DDDDDD" Padding="5"/>

            <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="10,0,0,0">
                <Button x:Name="EmojiButton" Width="40" Height="40" Margin="0,0,10,0"
                        Background="Transparent" BorderThickness="0" Click="EmojiButton_Click">
                    <TextBlock Text="ðŸ˜Š" FontSize="20"/>
                </Button>

                <Button x:Name="SendButton" Width="40" Height="40"
                        Background="#2196F3" BorderThickness="0" Click="SendTextMess_Click">
                    <Path Data="M2,21L23,12L2,3V10L17,12L2,14V21Z"
                          Fill="White" Stretch="Uniform" Margin="5"/>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Emoji Popup -->
        <Popup x:Name="EmojiPopup" PlacementTarget="{Binding ElementName=EmojiButton}" 
               Placement="Top" StaysOpen="False">
            <Border Background="White" BorderBrush="#DDDDDD" BorderThickness="1" 
                    CornerRadius="5" Padding="10">
                <StackPanel>
                    <WrapPanel x:Name="EmojiContainer" Width="300"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                        <Button Content="Previous" Click="PreviousEmojiPage_Click" Margin="0,0,10,0"/>
                        <TextBlock x:Name="EmojiPageInfo" VerticalAlignment="Center"/>
                        <Button Content="Next" Click="NextEmojiPage_Click" Margin="10,0,0,0"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Popup>
    </Grid>
</Window> 